---
import Navbar from "../components/navbar.astro";
import Footer from "../components/footer.astro";
---

<!DOCTYPE html>
<html lang="en" data-theme="main">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<title>Contact Allô Chef | Get Your Personal Batch Cooking Service</title>
		<meta
			name="description"
			content="Contact Chef David to start your personal batch cooking service. Professional meal prep at your home in under 3 hours."
		/>
		<meta
			name="keywords"
			content="contact chef, batch cooking service, meal prep booking, personal chef contact"
		/>
		<link href="/styles/output.css" rel="stylesheet" />
		<script
			src="https://kit.fontawesome.com/d1c56b39df.js"
			crossorigin="anonymous"></script>
	</head>
	<body class="min-h-screen bg-base-300">
		<Navbar />
		
		<main class="container mx-auto px-4 py-12 max-w-7xl">
			<!-- Hero Section -->
			<div class="text-center mb-16">
				<h1 class="text-5xl lg:text-6xl font-bold mb-8 text-neutral">
					Let's Get Started
				</h1>
				<p class="text-xl lg:text-2xl text-gray-700 max-w-3xl mx-auto leading-relaxed">
					Ready to transform your weekly routine? Contact me to discuss your meal prep needs and schedule your first batch cooking session.
				</p>
			</div>

			<!-- Contact Form and Info -->
			<div class="grid grid-cols-1 lg:grid-cols-2 gap-16 items-start mb-16">
				<div class="bg-white rounded-3xl p-10 shadow-2xl">
					<h2 class="text-3xl font-bold text-neutral mb-8">Send Me a Message</h2>
					
					<form id="contact-form" class="space-y-6">
						<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
							<div>
								<label for="firstName" class="block text-sm font-bold text-gray-700 mb-2">
									First Name *
								</label>
								<input
									type="text"
									id="firstName"
									name="firstName"
									required
									class="input input-bordered w-full bg-gray-50 border-gray-300 focus:border-primary focus:ring-primary"
									placeholder="Your first name"
								/>
							</div>
							<div>
								<label for="lastName" class="block text-sm font-bold text-gray-700 mb-2">
									Last Name *
								</label>
								<input
									type="text"
									id="lastName"
									name="lastName"
									required
									class="input input-bordered w-full bg-gray-50 border-gray-300 focus:border-primary focus:ring-primary"
									placeholder="Your last name"
								/>
							</div>
						</div>

						<div>
							<label for="email" class="block text-sm font-bold text-gray-700 mb-2">
								Email Address *
							</label>
							<input
								type="email"
								id="email"
								name="email"
								required
								class="input input-bordered w-full bg-gray-50 border-gray-300 focus:border-primary focus:ring-primary"
								placeholder="your.email@example.com"
							/>
						</div>

						<div>
							<label for="phone" class="block text-sm font-bold text-gray-700 mb-2">
								Phone Number (Optional)
							</label>
							<input
								type="tel"
								id="phone"
								name="phone"
								class="input input-bordered w-full bg-gray-50 border-gray-300 focus:border-primary focus:ring-primary"
								placeholder="Your phone number"
							/>
						</div>

						<div>
							<label for="message" class="block text-sm font-bold text-gray-700 mb-2">
								Message *
							</label>
							<textarea
								id="message"
								name="message"
								required
								rows="6"
								class="textarea textarea-bordered w-full bg-gray-50 border-gray-300 focus:border-primary focus:ring-primary resize-none"
								placeholder="Tell me about your meal prep needs, dietary requirements, preferred cooking styles, or any questions you have..."
							></textarea>
						</div>

						<button
							type="submit"
							class="btn btn-primary btn-lg w-full text-xl font-bold shadow-xl hover:shadow-2xl transform hover:scale-105 transition-all duration-300"
						>
							<i class="fas fa-paper-plane mr-3"></i>
							Send Message
						</button>
					</form>

					<div id="form-message" class="mt-6 hidden"></div>
				</div>

				<div class="space-y-8">
					<div class="bg-white rounded-3xl p-8 shadow-xl">
						<h3 class="text-2xl font-bold text-neutral mb-6">
							<i class="fas fa-clock text-primary mr-3"></i>
							Quick Response
						</h3>
						<p class="text-gray-700 leading-relaxed mb-4">
							I typically respond to all inquiries within 24 hours. For urgent requests, please include your phone number.
						</p>
						<p class="text-gray-700 leading-relaxed">
							My passion is simple: good food crafted from top-quality ingredients, delivered right to your home.
						</p>
					</div>

					<div class="bg-primary rounded-3xl p-8 text-white">
						<h3 class="text-2xl font-bold mb-6">
							<i class="fas fa-calendar-check mr-3"></i>
							What Happens Next?
						</h3>
						<div class="space-y-4">
							<div class="flex items-start space-x-3">
								<div class="bg-white rounded-full w-8 h-8 flex items-center justify-center flex-shrink-0 mt-1">
									<span class="text-primary font-bold text-sm">1</span>
								</div>
								<p>I'll review your message and respond with availability</p>
							</div>
							<div class="flex items-start space-x-3">
								<div class="bg-white rounded-full w-8 h-8 flex items-center justify-center flex-shrink-0 mt-1">
									<span class="text-primary font-bold text-sm">2</span>
								</div>
								<p>We'll schedule a brief consultation to discuss your needs</p>
							</div>
							<div class="flex items-start space-x-3">
								<div class="bg-white rounded-full w-8 h-8 flex items-center justify-center flex-shrink-0 mt-1">
									<span class="text-primary font-bold text-sm">3</span>
								</div>
								<p>I'll create your personalised meal plan and shopping list</p>
							</div>
							<div class="flex items-start space-x-3">
								<div class="bg-white rounded-full w-8 h-8 flex items-center justify-center flex-shrink-0 mt-1">
									<span class="text-primary font-bold text-sm">4</span>
								</div>
								<p>Your first batch cooking session gets scheduled!</p>
							</div>
						</div>
					</div>

					<div class="bg-gradient-to-r from-primary/10 to-primary/5 rounded-3xl p-8 text-center">
						<h3 class="text-2xl font-bold text-primary mb-4">
							Serving Tasman Area
						</h3>
						<p class="text-gray-700 leading-relaxed">
							Motueka, Tasman, Moutere, Brightwater, Richmond
						</p>
						<p class="text-sm text-gray-600 mt-2">
							Nelson deliveries incur a fuel fee
						</p>
					</div>
				</div>
			</div>

			<!-- Bottom CTA Section -->
			<div class="bg-primary rounded-3xl p-16 text-center">
				<h2 class="text-3xl lg:text-4xl font-bold text-white mb-6">
					Ready to Simplify Your Week?
				</h2>
				<p class="text-xl text-white/90 mb-8">
					Join satisfied families, singles and elderly clients who have discovered the joy of stress-free meal planning
				</p>
				<div class="mt-8 pt-6 border-t border-white/20">
					<p class="text-2xl text-white font-bold italic">À bientôt !</p>
				</div>
			</div>
		</main>

		<Footer />

		<script>
			const form = document.getElementById('contact-form') as HTMLFormElement;
			if (form) {
				form.addEventListener('submit', async (e) => {
					e.preventDefault();
					
					const formData = new FormData(form);
					const submitButton = form.querySelector('button[type="submit"]') as HTMLButtonElement;
					const messageDiv = document.getElementById('form-message') as HTMLDivElement;
					
					if (!submitButton || !messageDiv) return;
					
					// Show loading state
					submitButton.disabled = true;
					submitButton.innerHTML = '<i class="fas fa-spinner fa-spin mr-3"></i>Sending...';
					
					try {
						const response = await fetch('/api/contact', {
							method: 'POST',
							body: formData
						});
						
						const result = await response.json();
						
						if (response.ok) {
							messageDiv.className = 'mt-6 alert alert-success';
							messageDiv.innerHTML = '<i class="fas fa-check-circle mr-2"></i>' + result.message;
							form.reset();
						} else {
							throw new Error(result.error || 'Something went wrong');
						}
					} catch (error) {
						messageDiv.className = 'mt-6 alert alert-error';
						const errorMessage = error instanceof Error ? error.message : 'Something went wrong';
						messageDiv.innerHTML = '<i class="fas fa-exclamation-circle mr-2"></i>' + errorMessage;
					} finally {
						// Reset button state
						submitButton.disabled = false;
						submitButton.innerHTML = '<i class="fas fa-paper-plane mr-3"></i>Send Message';
						messageDiv.classList.remove('hidden');
						
						// Scroll to message
						messageDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
					}
				});
			}
		</script>
	</body>
</html>
									